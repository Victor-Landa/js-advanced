<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Generators</title>
</head>
<body>
  <a href="/ejercicios/">Go back</a>
  <p><em>Abre la consola 👉🏻</em></p>


  <script>
    // Los generadores son funciones de las que se puede salir y volver a entrar.
    // Su contexto (asociación de variables) será conservado entre las reentradas.
    // Cada vez que llamamos next, la ejecución del generador va a continuar hasta el próximo yield

    // Esta función, no es ejecutable, tenemos que llamarla a partir de la creación de una nueva función.
    function* simpleGenerator() {
      console.log('Generator Start');
      yield; // ceder
      // yield 1;
      // yield 2;
      // yield 3;
      console.log('Generator End');
    }

    // const gen = simpleGenerator();

    // Podemos hacer generadores infinitos.
    function* idMaker() {
      let id = 1;
      while(true) {
        yield id;
        id = id + 1;
      }
    }

    // Cuando llamamos next también podemos pasar valores que la función recibe.
    function* idMakerWithReset() {
      let id = 1;
      let reset;
      while(true) {
        reset = yield id;
        if(reset) {
          id = 1;
        } else {
          id = id + 1;
        }
      }
    }

    // const gen = simpleGenerator();
    // gen.next() => {value: 1, done: false}
    // gen.next() => {value: 2, done: false}
    // gen.next(true) => {value: 1, done: false}

    // Ejemplo: Secuencia Fibonacci
    // Los Generadores se utilzan para crear funciones eficientes en memoria.

    function* fibonacci() {
      let a = 1;
      let b = 1;

      while(true) {
        const nextNumber = a + b;
        a = b;
        b = nextNumber;
        yield nextNumber;
      }
    }

    // Los Generadores son funciones especiales cuya ejecución podemos empezar y detener en plena ejecución, cuando queramos continuarla podemos llamar next(), si hace falta también podemos pasarle un valor al generador.
    // Estas funciones siempre recuerdan el scope en el que estaban.

  </script>
</body>
</html>